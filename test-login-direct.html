<!doctype html>
<html>
  <head>
    <title>直接測試登入</title>
    <style>
      body {
        font-family: Arial;
        padding: 20px;
      }
      input {
        display: block;
        margin: 10px 0;
        padding: 8px;
        width: 300px;
      }
      button {
        padding: 10px 20px;
      }
      #result {
        margin-top: 20px;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <h1>直接測試登入 API</h1>

    <input type="email" id="email" placeholder="Email" value="wii543@gmail.com" />
    <input
      type="password"
      id="password"
      placeholder="Password"
      value="ppt1567"
      autocomplete="off"
    />
    <button onclick="testLogin()">測試登入</button>

    <div id="result"></div>

    <script>
      async function testLogin() {
        const email = document.getElementById('email').value
        const password = document.getElementById('password').value
        const resultDiv = document.getElementById('result')

        resultDiv.textContent = '發送請求中...\n'
        resultDiv.textContent += `Email: ${email}\n`
        resultDiv.textContent += `密碼: ${password}\n`
        resultDiv.textContent += `密碼長度: ${password.length}\n\n`

        try {
          const response = await fetch(
            'https://f3451381.pharmacy-assistant-academy.pages.dev/api/v1/auth/login',
            {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({ email, password })
            }
          )

          const data = await response.json()

          resultDiv.textContent += `狀態: ${response.status}\n\n`
          resultDiv.textContent += `響應:\n${JSON.stringify(data, null, 2)}`

          if (data.success) {
            resultDiv.textContent += '\n\n✅ 登入成功！'
          } else {
            resultDiv.textContent += '\n\n❌ 登入失敗'
          }
        } catch (error) {
          resultDiv.textContent += `\n\n錯誤: ${error.message}`
        }
      }
    </script>
  </body>
</html>
